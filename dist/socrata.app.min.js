function Basket(t){this.items=t?t.items:void 0||[]}function Products(t){this.items=t?t.products:void 0||[]}function Receipt(t){var e="\r\n",i=" _______________________________________________"+e+"|                                               |"+e+"|     .::+                        .+            |"+e+"|     :                           .+            |"+e+"|     +;    +++++  ++++:+++ ++++ ++++:.++++     |"+e+"|     :++, :+   +.'+   :+      '+ .+      +     |"+e+"|       ;+.+;   +++,   :+   .++++ .+   '+++     |"+e+"|        +++;   +++,   :+  ,+  :+ .+  +'  +     |"+e+"|        +',+   +`;+   :+  ++  ++ .+  +   +     |"+e+"|     ++++  '+++'  ++++,+  `+++'+  ++;+++++     |"+e+"|                                               |"+e+"|                               Store           |"+e+"|                                               |"+e+"|-----------------------------------------------|"+e+"|                                               |"+e,o="|  %s  x  %s%s  |"+e,s="|                                               |"+e+"|-----------------------------------------------|"+e+"|                                               |"+e+"|                     Sales tax ......%s  |"+e+"|                     Total ..........%s  |"+e+"|                                               |"+e+"|      Thanks for shopping with Socrata!        |"+e+"|_______________________________________________|";this.headerTemplate=t?t.headerTemplate:void 0||i,this.itemTemplate=t?t.itemTemplate:void 0||o,this.footerTemplate=t?t.footerTemplate:void 0||s,this.nl=e}function Taxes(t){this.nonTaxableTypes=t?t.nonTaxableTypes:void 0||["book","food","medical"],this.taxRate=t?t.taxRate:10,this.taxRate=this.taxRate/100+1,this.importRate=t?t.importRate:5,this.importRate=this.importRate/100+1,this.roundTaxUp=t?t.roundTaxUp:.05,this.roundTaxUp=1/this.roundTaxUp}function App(t){for(var e in t)this[e]=t[e];this.roundTax=t?t.roundTax:.05,this.receipt=this.receipt||new Receipt,this.taxes=this.taxes||new Taxes,this.products=this.products||new Products,this.basket=this.basket||new Basket}Basket.prototype.getItems=function(){return this.items},Basket.prototype.setItems=function(t){this.items=t},Basket.prototype.clearItems=function(){this.items=[]},Basket.prototype.addItem=function(t){this.items.push(t)},module.exports=Basket,Products.prototype.getProduct=function(t){for(var e=this.items.length,i=0;e>i;i++)if(this.items[i].sku===t)return this.items[i];return null},Products.prototype.setProducts=function(t){this.items=t},module.exports=Products;var util=require("util");Receipt.prototype.getReceipt=function(t,e){for(var i=this.headerTemplate,o=t.length,s=0;o>s;s++)i+=util.format(this.itemTemplate,1,this.formatName(t[s].name,t[s].imported),this.formatMoney(t[s].finalPrice));return i+=util.format(this.footerTemplate,this.formatMoney(e.tax),this.formatMoney(e.total))},Receipt.prototype.formatMoney=function(t){return this.repeatChars(" ",6-t.length)+"$"+t},Receipt.prototype.formatName=function(t,e){return t=e?t+" (imported)":t,t+this.repeatChars(".",28-t.length)},Receipt.prototype.repeatChars=function(t,e){for(var i=t,o=0;e>o;o++)i+=t;return i},module.exports=Receipt,Taxes.prototype.calculate=function(t){var e=0,i=0,o=0;return this.taxRate&&-1==this.nonTaxableTypes.indexOf(t.type)&&(e=t.price*this.taxRate-t.price),this.importRate&&t.imported&&(i=t.price*this.importRate-t.price),o=e+i,this.roundTaxUp&&o&&(o=Math.ceil(o*this.roundTaxUp)/this.roundTaxUp),t.finalPrice=(t.price+o).toFixed(2),t.totalTax=o.toFixed(2),t},module.exports=Taxes;var Receipt=require("../src/shop/Receipt.js"),Taxes=require("../src/shop/Taxes.js"),Products=require("../src/shop/Products.js"),Basket=require("../src/shop/Basket.js");App.prototype.addItem=function(t){var e=this.products.getProduct(t);this.basket.addItem(e)},App.prototype.getItems=function(){for(var t=this.basket.getItems(),e=t.length,i=[],o=0;e>o;o++)i.push(this.taxes.calculate(t[o]));return i},App.prototype.getTotals=function(){for(var t,e=this.basket.getItems(),i=e.length,o={total:0,tax:0},s=0;i>s;s++)t=this.taxes.calculate(e[s]),o.total+=parseFloat(t.finalPrice),o.tax+=parseFloat(t.totalTax);return o.total=o.total.toFixed(2),o.tax=o.tax.toFixed(2),o},App.prototype.getReceipt=function(t,e){return this.receipt.getReceipt(t,e)},module.exports=new App;
//# sourceMappingURL=dist/socrata.app.min.js.map